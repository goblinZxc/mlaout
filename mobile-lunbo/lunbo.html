<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Document</title>
</head>
<body>
<style>
	*{
		margin: 0;
		padding: 0;
		list-style-type: none;
		box-sizing:border-box;
	}
	.box{
		width: 100%;
		height:  300px;
		overflow: hidden;
	}
	.content{
		width: 400%;
		height: 100%;
	}
	.content>div{
		width: 25%;
		height: 100%;
		/*border: 1px solid red;*/
		float: left;
		line-height: 300px;
		text-align: center;
		font-size: 80px;
		color: #000;
	}
	.content>div img{
		width: 100%;
		display:block;
	}
</style>
<div class="box">
	<div class="content">
		<div><img src="banner1.jpg" alt=""></div>
		<div><img src="banner2.jpg" alt=""></div>
		<div><img src="banner3.jpg" alt=""></div>
		<div><img src="banner1.jpg" alt=""></div>
	</div>
</div>
<script>
	var index=0;
	var box=document.querySelector(".box");
	var content=document.querySelector(".content");
	var cw=box.offsetWidth;
	box.addEventListener("touchstart",function(e){
		// console.dir(e);
		content.style.transition="";
		// 这句是为了防止移动时频繁触发transition，不够流畅
		var ev=e||window.event;
		var aa=ev.targetTouches[0];
		var dx=aa.clientX;
		var wx=0;
		var t1=ev.timeStamp;
		window.addEventListener("touchmove",m)
		function m(e){
			var ev=e||window.event;
			var aa1=ev.targetTouches[0];
			wx=aa1.clientX;
			// end中要调用，所以改为全局
			// console.log(index);
			content.style.transform="translate3d("+(wx-dx-index*cw)+"px,0,0)";
			// 3d会开启手机硬件加速，比较流畅
		}
		box.addEventListener("touchend",end)
		function end(e){
			var ev=e||window.event;
			var t2=ev.timeStamp;
			var tt=t2-t1;
			window.removeEventListener("touchend",aa)
			box.removeEventListener("touchend",end)
			if(Math.abs(wx-dx)>cw/2.5||tt<200){
				if(wx-dx<0){
					index++;
				}
				if(wx-dx>0){
					index--;
				};
				if(index==4){
					index=3;
				}
				if (index==-1) {
					index=0
				}
				content.style.transition="transform 0.3s";
				content.style.transform="translate3d(-"+(25*index)+"%,0,0)";
			}else{
				content.style.transform="translate3d(-"+(25*index)+"%,0,0)"
			}
		}
	})
</script>
</body>
</html>